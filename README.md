# Cab Booking System

A full-stack cab booking application with **role-based authentication** (Admin, HR, Driver). Built with a **Spring Boot** REST API backend and a **React + TypeScript** frontend.

---

## Tech Stack

### Backend (`rollbasedlogin/`)
- **Java 21** / **Spring Boot 3.4**
- Spring Security + JWT (jjwt)
- Spring Data JPA + MySQL
- Bean Validation (Jakarta)
- Maven

### Frontend (`role-based-login-frontend/`)
- **React 18** + **TypeScript**
- Vite 6 (dev server & build)
- Tailwind CSS 4
- Radix UI / shadcn-style components
- Axios (HTTP client)
- Recharts (dashboards)

---

## Prerequisites

| Tool | Version |
|------|---------|
| Java JDK | 21+ |
| Maven | 3.8+ |
| Node.js | 18+ |
| npm | 9+ |
| MySQL | 8+ |

---

## Getting Started

### 1. Clone the repository

```bash
git clone https://github.com/kshathishka/cabbooking.git
cd cabbooking
```

### 2. Set up MySQL

Create the database (the tables are auto-generated by Hibernate):

```sql
CREATE DATABASE IF NOT EXISTS rolebased_login;
```

> The app connects to `localhost:3306` with user `root` and password `2006`.  
> To change these, edit `rollbasedlogin/src/main/resources/application.properties`:
> ```properties
> spring.datasource.url=jdbc:mysql://localhost:3306/rolebased_login
> spring.datasource.username=root
> spring.datasource.password=2006
> ```

### 3. Run the backend

```bash
cd rollbasedlogin
mvn spring-boot:run
```

The API starts on **http://localhost:8080**.

### 4. Run the frontend

Open a **new terminal**:

```bash
cd role-based-login-frontend
npm install
npm run dev
```

The app starts on **http://localhost:5173** (or the next available port).

### 5. Open the app

Visit the URL shown in the Vite terminal output (e.g. `http://localhost:5173`).  
Register a new account, then sign in.

---

## API Endpoints

### Auth
| Method | Endpoint | Description |
|--------|----------|-------------|
| POST | `/api/auth/register` | Register a new user |
| POST | `/api/auth/login` | Login & receive JWT |

### Admin (requires ADMIN role)
| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/api/admin/users` | List all users |
| GET | `/api/admin/drivers` | List all drivers |
| GET | `/api/admin/bookings` | List all bookings |

### HR (requires HR role)
| Method | Endpoint | Description |
|--------|----------|-------------|
| POST | `/api/hr/drivers` | Add a driver |
| GET | `/api/hr/drivers` | List drivers |
| POST | `/api/hr/bookings` | Create a booking |
| GET | `/api/hr/bookings` | List bookings |

### Driver (requires DRIVER role)
| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/api/driver/bookings` | View assigned bookings |
| PUT | `/api/driver/bookings/{id}/accept` | Accept a booking |
| PUT | `/api/driver/bookings/{id}/complete` | Complete a booking |

---

## Project Structure

```
cabbooking/
├── rollbasedlogin/              # Spring Boot backend
│   ├── src/main/java/com/example/rollbasedlogin/
│   │   ├── config/              # Security, CORS, exception handling
│   │   ├── controller/          # REST controllers
│   │   ├── model/               # JPA entities & DTOs
│   │   ├── repository/          # Spring Data repositories
│   │   └── util/                # JWT utility, schedulers
│   └── src/main/resources/
│       └── application.properties
│
├── role-based-login-frontend/   # React + TypeScript frontend
│   ├── src/
│   │   ├── app/components/      # Pages & UI components
│   │   ├── context/             # Auth context (React Context API)
│   │   ├── services/            # API client (Axios)
│   │   ├── styles/              # CSS (Tailwind, custom auth styles)
│   │   └── types/               # TypeScript interfaces
│   └── package.json
│
└── README.md
```

---

## License

This project is licensed under the [GPL-3.0 License](LICENSE).